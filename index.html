<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Amor</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  font-family: 'Arial', sans-serif;
  background: #fff5f8;
}

#scene {
  position: relative;
  width: 100%;
  height: 100%;
}

/* Coraz√≥n inicial */
#startHeart {
  position: absolute;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 120px;
  color: #ff4f8b;
  cursor: pointer;
  transition: transform 1s, border-radius 1s;
}

#sanValentin {
  position: absolute;
  top: 55%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 28px;
  color: #ff4f8b;
}

/* L√≠nea negra */
#line {
  position: absolute;
  bottom: 40px;
  width: 120%;
  height: 6px;
  background: black;
  left: -10%;
}

/* √Årbol */
#treeContainer {
  position: absolute;
  bottom: 46px;
  left: 50%;
  transform: translateX(-50%);
  transition: transform 2s;
}

svg {
  overflow: visible;
}

/* Texto */
#textContainer {
  position: absolute;
  left: 40px;
  top: 80px;
  width: 35%;
  color: #444;
  font-size: 18px;
  display: none;
}

#timer {
  margin-top: 20px;
  font-weight: bold;
}

/* Corazones hojas */
.leaf {
  position: absolute;
  font-size: 18px;
  animation: float 6s linear infinite;
}

@keyframes float {
  0% { transform: translate(0,0) rotate(0deg); opacity: 1; }
  100% { transform: translate(-120px, 200px) rotate(60deg); opacity: 0; }
}
</style>
</head>

<body>
<div id="scene">

  <div id="startHeart">‚ù§</div>
  <div id="sanValentin">San Valent√≠n</div>

  <div id="line"></div>

  <div id="treeContainer"></div>

  <div id="textContainer">
    <div id="dedication"></div>
    <div id="paragraph"></div>
    <div id="post"></div>
    <div id="timer"></div>
  </div>

</div>

<script>
const heart = document.getElementById('startHeart');
const text = document.getElementById('textContainer');
const treeContainer = document.getElementById('treeContainer');

heart.addEventListener('click', () => {
  document.getElementById('sanValentin').style.display = 'none';

  heart.style.borderRadius = '50%';
  heart.style.transform = 'translate(-50%, -50%) scale(0.7)';

  let top = 40;
  const fall = setInterval(() => {
    top += 5;
    heart.style.top = top + '%';
    if (top >= 85) {
      clearInterval(fall);
      heart.style.display = 'none';
      drawTree();
    }
  }, 30);
});

function drawTree() {
  treeContainer.innerHTML = `
  <svg width="300" height="400">
    <path d="M150 400 L150 200" stroke="#6b3e26" stroke-width="10" fill="none">
      <animate attributeName="stroke-dasharray" from="0,400" to="400,0" dur="2s" fill="freeze"/>
    </path>
    <path d="M150 260 C90 220, 80 170, 60 120" stroke="#6b3e26" stroke-width="4" fill="none"/>
    <path d="M150 260 C210 220, 220 170, 240 120" stroke="#6b3e26" stroke-width="4" fill="none"/>
    <path d="M150 220 C110 190, 100 150, 90 120" stroke="#6b3e26" stroke-width="3" fill="none"/>
    <path d="M150 220 C190 190, 200 150, 210 120" stroke="#6b3e26" stroke-width="3" fill="none"/>
  </svg>
  `;

  setTimeout(createLeaves, 2000);
}

function createLeaves() {
  const colors = ['#ffb3c6','#ff8fab','#ff5d8f','#ff4d6d'];

  for (let i = 0; i < 60; i++) {
    const leaf = document.createElement('div');
    leaf.className = 'leaf';
    leaf.textContent = '‚ù§';
    leaf.style.color = colors[Math.floor(Math.random()*colors.length)];
    leaf.style.left = (window.innerWidth/2 + Math.random()*120 - 60) + 'px';
    leaf.style.top = (window.innerHeight - 300 + Math.random()*180) + 'px';
    leaf.style.fontSize = (12 + Math.random()*14) + 'px';
    document.body.appendChild(leaf);

    if (Math.random() < 0.4) {
      leaf.style.animationDelay = (Math.random()*3)+'s';
    } else {
      leaf.style.animation = 'none';
    }
  }

  setTimeout(showText, 2500);
}

function showText() {
  treeContainer.style.transform = 'translateX(120px)';
  text.style.display = 'block';

  startTimer('2023-02-14T00:00:00');

  typeText("Para el amor de mi vida üíñ", document.getElementById('dedication'), 40, () => {
    typeText("Este √°rbol representa todo lo que ha crecido entre nosotros, incluso en los d√≠as m√°s dif√≠ciles.", document.getElementById('paragraph'), 30, () => {
      typeText("P.D. I love you ‚ù§Ô∏è", document.getElementById('post'), 40);
    });
  });
}

function typeText(text, element, speed, callback) {
  let i = 0;
  const interval = setInterval(() => {
    element.textContent += text[i];
    i++;
    if (i >= text.length) {
      clearInterval(interval);
      if (callback) callback();
    }
  }, speed);
}

function startTimer(date) {
  const start = new Date(date);
  setInterval(() => {
    const now = new Date();
    const diff = now - start;
    const days = Math.floor(diff / (1000*60*60*24));
    document.getElementById('timer').textContent =
      `Mi amor por ti comenz√≥ hace: ${days} d√≠as`;
  }, 1000);
}
</script>
</body>
</html>
